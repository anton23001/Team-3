<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Päiväkirja</title>
</head>
<body>

    <header><h1>Päiväkirja</h1></header>

    <h2>1: Rekisteröitymisjärjestelmä</h2>

    <ul>
        <h3>Luodaan tietokanta(user_data)</h3>
        <li> ID </li>
        <li>First name (lisätään myöhemmin) </li>
        <li>Last name (lisätään myöhemmin)</li>
        <li>E-mail </li>
        <li>User_account</li>
         <li>Password </li>
        <li> DOB (lisätään myöhemmin)</li>
    </ul>

    <ul><h3>Muita huomioon otettavia asioita</h3>
        <li> -Ylläpitopuoli pitää suojatta "htaccessilla" tai omalla tietokantaan pohjautuvalla tavalla. </li>
        <li> -Pitää erottaa adminin ja tavallisen käyttäjän oikeudet  </li>
        <li> -Voi tehdä kannassa itsessään(?) </li>
        <li> -Pitää lisätä uloskirjautumisominaisuus </li>
        <li> -Käyttäjätunnuksen luomiseen pitää määrittää tietyt ehdot esim. mitä merkkejä voi/ei voi käyttää. </li>
        <li>-Sisäänkirjautuessa kirjaudu/rekisteröidy </li>
        <li> -painikkeen muuttaminen muotoon: ktunnus – Kirjaudu ulos (tai alertin tekeminen alkuvaiheessa onnistuneelle kirjautumiselle)</li>
    </ul>
    
<h2>2: Palauteosion vaihtaminen vieraskirjaksi</h2>

<p>
Vieraskirja 
- Käyttäjä voi kirjoittaa ja lukea viestejä. Ylläpitäjä voi muuttaa ja poistaa viestejä ja ehkä vastata viesteihin. 
Ylläpitopuoli on suojattu "htaccessilla" tai omalla tietokantaan pohjautuvalla tavalla. 
</p>

<h2>Tehtävien jako</h2>

    <ul>
        <h3>Sovimme alustavasti seuraavat työtehtävät</h3>
        <li>Ville hoitaa rekisteröinnin. </li>
        <li>Sebastian hoitaa kirjautumisen. </li>
        <li>Anton hoitaa vieraskirjan. </li>
    </ul>

<ul>
    <h3>Loppua kohden ne muuttuivat seuraavasti</h3>
    <li>Ville  
        -rekisteröinti, kirjautuminen ja käyttäjälle mahdollisuus selata rekisteröityjä käyttäjiä </li>
    <li>Sebastian 
        -Ylläpitäjälle oikeudet poistaa/muokata käyttäjien tietoja </li>
    <li>Anton 
        -Palauteosio jossa käyttäjätiedot ja käyttäjän antama palaute tallentuu tietokantaan. </li>
</ul>

<ul>
    <h3>Villen merkinnät</h3>
    <li>Tiistai 6.2.2024 <br>
        Rekisteröinti tehty muttei testattu. Käytin tähän ajax menetelmää. Meni käytännössä koko päivä että sain annetut tiedot meneen tietokantaan. 
        Seuraavaksi pitää saada ehtolause tehtyä joka tarkistaa onko samanlainen käyttäjätunnus jo olemassa. (Ville) </li><br>
    <li>Keskiviikko 7.2.2024 <br>
        Sain tänään rekisteröinnin sille tolalle että nyt ilmoittaa jos tietokannassa on jo samanlainen käyttäjätunnus. 
        Sitä voi nyt hyödyntää myös sähköpostin kohdalla. (Ville) </li><br>
    <li>Torstai 8.2.2024 <br>
        Rekisteröinti toimii. Nyt ilmoittaa jos tietokannasta löytyy entuudestaan sama käyttäjätunnus tai sähköpostiosoite. Rekisteröinti kryptaa käyttäjien salasanat meidän tietokantaan. 
        Tein myös ht-suojaukselle tarvittavat toimenpiteet. ht.asetukset.ini löytyy samasta php kansiosta. (VIlle) </li><br>
    <li>Maanantai 12.2.2024 <br>
        Kokeilumielessä tein sisäänkirjatumisen joka vie tervetuloa sivulle. 
        Muokkaan sivustoa niin että kirjaudu ulos painike näkyy jos käyttäjä on kirjautunut sivulle. (Ville) </li><br>
    <li>Keskiviikko 14.2.2024 <br>
        Kirjatuminen onnistuu verkkosivuille 
        Onnistuneen kirjautumisen myötä käyttäjä ohjataan tervetuloa.php sivulle josta voi halutessaan tarkistella muita käyttäjiä ja kirjautua pihalle.(Ville) </li><br>
    <li>15.2. ja 16.2.2024  <br>
        Yritin saada käyttäjälistan tulostumaan prepared statementtia hyödyntämällä. En saanut sitä toimimaan, joten päätin käyttää query menetelmää. (Ville) </li><br>
</ul>


<ul>
    <h3>Antonin merkinnät</h3>
    <li>Maanantai 5.2.2024 <br>
        Tein alustavan testikannan. 
        create table user(id int not null auto_increment primary key, user_account varchar(100) not null, etunimi varchar(100) not null, sukunimi varchar(100) not null)engine=InnoDB; </li><br>
    <li>Tiistai 6.2.2024 <br>
        Koitin selvitellä hieman, että pitäisikö tehdä admin-käyttäjlle oma taulunsa vaiko ei. Lopputulema oli ei ja lisäsin vain testikantaan admin-kentälle 0 1 arvon ja defaultiksi 0 = ei admin, kun boolean arvoa samassa taulussa tuntui paremmmalta.
        Googlettelin myös password_hashia, että miten en kanssa tulisi toimia jatkossa, kun lisää salasana-kenttää kantaan.
        "ALTER TABLE user ADD COLUMN admin TINYINT(1) DEFAULT 0;"
        Puskin myös seuraavaksi tunniksi valmiiksi saatavat yhteysvirhe.html + yhteysvirhe.php:n </li><br>
    <li>Keskiviikko 7.2.2024 <br>
        Muokkasin myös palauteosiota vielä vieraskirjaksi, eli koitin muokata html-tiedostoa vielä erinäköiseksi, jotta toiminnallisuus olisi helpompi guestbookille.
        Kumosin kuitenkin tiistain tunnilla tehtyjä asioita aika paljon. </li><br>
    <li>Maanantai-Keskiviikko 12-14.2.2024 <br>
        Koitin kuumeessa toteuttaa guestbookin esimerkkiä geeksforgeeksin sivuilta edelleen ohjeita seuraten ja selvitellen, mutta javascriptin api-endpointtien yms. kanssa mentiin aika hakoteille.
        Tutkin myös tehtyä koodia. </li><br>
    <li>Perjantai 16.2.2024 <br>
        Palasin käytännössä alkuun alkuperäisen vieraskirjan toteutuksen kanssa, koska vieraskirjan esimerkkiä olikin hankalahkompi toteuttaa. Pidin sitä tallessa edelleen varuiksi. </li><br>
    <li>Lauantai 17.2.2024  <br>
        Lisäsin kannan web_trtkp23_3 alle sisältäen 2 eri taulua, guestbookin ja userin pienien muutoksien jälkeen. Tässä vaiheessa myös lisättiin password columni myös, kun katselin aiemmin sairaana, että Ville oli myös selvitellyt salasanan salauksen kuntoon.
        CREATE TABLE user (id INT AUTO_INCREMENT PRIMARY KEY, user_account VARCHAR(255) NOT NULL UNIQUE, etunimi VARCHAR(255) NOT NULL, sukunimi VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL UNIQUE, password VARCHAR(255) NOT NULL) ENGINE=InnoDB;
        CREATE TABLE guestbook (id INT AUTO_INCREMENT PRIMARY KEY, name VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, message TEXT NOT NULL, timestamp DATETIME DEFAULT CURRENT_TIMESTAMP) ENGINE=InnoDB;
        Katselin myös .ht.asetukset.ini :lle tehtävää muutosta, jotta yhteys onnistuu ja tästä kyselin Villeltä varmistusta. </li><br>
    <li>Lauantai/Sunnuntai 17-18.2.2024 <br>
        Koitin vielä muokkailla uudempaa versiota vieraskirja.php:stä ja palaute.html:ää valmiiksi.</li><br>
    <li>Maanantai 19.2.2024 <br>
        Pidettiin Villen kanssa pidempi palaveri aamusta, jossa sain avut lopun palaute.html:än toteutukseen. Siinä hyödynnettin Villen aiemmin luomaa skriptiä rekisteröinnistä.
        vieraskirja.php koki myös muutosta, jotta tietokantayhteys saatiin viimeinkin toimimaan.
        Katsottiin phpmyadmnista, että molempiin pöytiin onnistui lisäys, sekä uuden käyttäjän rekisteröinti/sisäänkirjautuminen. Katsottiin myös toiminnallisuus ja valmistauduttiin katselmointiin.</li><br>
</ul>

<h3>Loppukaneetti</h3>
<article>
    Projekti suoriutui hyvin, vaikka alussa jokaisella tuntui olevan hieman hankaluuksia. Saimme ne toiminnallisuudet meidän verkkosivullemme tehtyä, joista olimme projektin alussa sopineet. Projektin alussa jaetut vastuualueet muuttuivat hieman projektin edetessä. Kommunikointi ryhmän sisällä toimi projektin aikana. Keskustelimme Teamisissa ja Discordissa oman tehtävän etenemisestä ja ongelmista, joita kukin omalla kohdallaan kohtasi. 
</article>

</body>
</html>